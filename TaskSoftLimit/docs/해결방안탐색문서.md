# 해결방안 탐색 문서 — 목표 수 제한 (ActiveTaskCount 기반)

## 1. 문서 개요

본 문서는 **목표 수 제한** 기능에 대한 사양서 초안이며, **ActiveTaskCount 기반 Soft/Hard 제한 실험 인프라** 설계의 기반이 된다.  
활성 목표 수(ActiveTaskCount)가 특정 임계값을 초과할 때의 문제와, 소프트/하드 제한 해결책, 이벤트 정의, 관찰 포인트, 실험 설계 및 평가 지표를 다룬다.

---

## 2. 문제 정의 (Problem Definition)

| 구분 | 핵심 내용 |
|------|-----------|
| **상황** | `ActiveTaskCount`(현재 활성 목표 수)가 **6개 이상**인 구간에서 |
| **문제 1** | `task_miss`(24시간 내 미완료 목표) 발생 비율 증가 |
| **문제 2** | **7일 유지율(Retention Rate)** 감소 |

→ ActiveTaskCount 계산 및 목표 생성 시점에 과부하를 판단하는 근거를 제공한다.

---

## 3. 해결안 아이디어 (Solution Idea)

| 구분 | 핵심 내용 |
|------|-----------|
| **상황** | `ActiveTaskCount >= 6`일 때 적용 |

### Soft Limit (소프트 제한) — 본 실험의 Control

- **"오늘 목표는 최대 5개가 적절해요"**와 같은 안내 메시지 노출
- **목표 생성 허용** (차단하지 않음)
- 생성은 허용하되 **가이드만 노출**하는 규칙과 일치

### Hard Limit (하드 제한) — Treatment 대조군

- **6번째 목표 생성 차단**
- "오늘 목표는 최대 5개까지 설정할 수 있어요"와 같은 안내 메시지 노출

### 공통 (Soft/Hard 모두)

- `OverloadIndex` (`-ActiveTaskCount`, `AvgCompletion7d` 등으로 계산) 안내
- **추천 목표 수** 제시

---

## 4. 장단점

### 장점

- **작은 성공 확보** — 실행 가능 범위 내 계획 수립
- **목표 과다 설정으로 인한 실패 누적 방지**
- **장기 유지율 개선** 기대

### 단점

- 강한 제한 시 **자율성 침해 인식** 가능성
- **단기 이탈**(60초 이내 종료) 증가 가능성

---

## 5. 이벤트 정의 (Event Definition)

| 이벤트 | 설명 |
|--------|------|
| `app_open` | 앱 실행 (App launch) |
| `app_close` | 앱 종료 (App termination) |
| `task_create` | 목표 생성 (Goal creation) |
| `task_complete` | 목표 완료 (Goal completion) |
| `task_miss` | 24시간 내 미완료 (Not completed within 24 hours) |
| `chain_break` | 연속 완료 기록 단절 (Interruption of consecutive completion streak) |
| `task_modify` | 목표 수정/삭제/교체 (Goal modification/deletion/replacement) |
| `guide_exposed` | 가이드 노출 (Guide exposure) |
| `limit_blocked` | 목표 제한 노출 (Goal limit blocked exposure) |

→ 이벤트 로깅 구조 및 GoalEventLog 도메인 설계의 기준이 된다.

---

## 6. 관찰 포인트 (Observation Points)

- **목표 과다 설정 구간 실패율:** `P(task_miss | ActiveTaskCount >= 6)`
- **누적 실패 임계점:** `P(chain_break | miss_count >= 3)`, `P(retention_7d | miss_count >= 5)`
- 체인 단절 임계점 존재 여부
- `ChainLength` 증가 후 `chain_break` 발생 시 유지율 급락 여부 확인

---

## 7. 실험 기능 구조 (Experiment Feature Structure)

| 구분 | 핵심 내용 |
|------|-----------|
| **실험 배정** | **"6번째 목표 생성 시도 시점"**에 무작위 배정 |

### Control (Soft limit)

- `ActiveTaskCount >= 6` 진입 시 **경고/가이드만 노출**
- **6개 이상 생성 허용**

### Treatment (Hard limit)

- `ActiveTaskCount >= 6`에서 **6번째 생성 차단**
- "오늘 목표는 최대 5개"와 같은 안내 노출

---

## 8. 실험 지표 (Experiment Metrics)

| 지표 | 설명 |
|------|------|
| **실패율** | `P(task_miss \| 6번째 목표 생성 시도, group)` |
| **7일 유지율** | `P(retention_7d \| 6번째 목표 생성 시도(첫 발생), group)` |
| **목표 조정률** | `P(task_modify \| guide_exposed, Soft)`, `P(task_modify \| limit_blocked, Hard)` |
| **즉시 반발 여부** | `P(app_close <= 60s \| guide_exposed, Soft)`, `P(app_close <= 60s \| limit_blocked, Hard)` |

→ 실험 분석 가능 구조 설계 시 추적할 핵심 성과 지표(KPI)이다.
